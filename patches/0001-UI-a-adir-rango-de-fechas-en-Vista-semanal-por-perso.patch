From cbf2f444a11cd778a2a1d8e52ee58c3bc0eb6688 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andr=C3=A9s=20Fern=C3=A1ndez?= <andres@careucom.com>
Date: Sun, 19 Oct 2025 19:39:26 +0000
Subject: [PATCH] =?UTF-8?q?UI:=20a=C3=B1adir=20rango=20de=20fechas=20en=20?=
 =?UTF-8?q?'Vista=20semanal=20por=20persona'?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 src/App.jsx                |  2 +-
 tools/apply_week_label.awk | 18 ++++++++++++++++++
 2 files changed, 19 insertions(+), 1 deletion(-)
 create mode 100644 tools/apply_week_label.awk

diff --git a/src/App.jsx b/src/App.jsx
index deca3ab..3ef56f6 100644
--- a/src/App.jsx
+++ b/src/App.jsx
@@ -713,7 +713,7 @@ export default function App(){
 
           <Card title="Vista semanal por persona">
             <div className="flex items-center justify-between mb-2">
-              <div className="text-sm">Semana {weekIndex+1} / {state.weeks}</div>
+              <div className="text-sm">Semana {weekIndex+1} / {state.weeks} · {weekRangeLabel}</div>
               <div className="flex items-center gap-2">
                 <button disabled={!canPrev} onClick={()=>setWeekIndex(w=>Math.max(0,w-1))} className={`px-2 py-1 rounded border ${canPrev? 'hover:bg-slate-100':'opacity-50 cursor-not-allowed'}`}>◀︎</button>
                 <button disabled={!canNext} onClick={()=>setWeekIndex(w=>Math.min(state.weeks-1,w+1))} className={`px-2 py-1 rounded border ${canNext? 'hover:bg-slate-100':'opacity-50 cursor-not-allowed'}`}>▶︎</button>
diff --git a/tools/apply_week_label.awk b/tools/apply_week_label.awk
new file mode 100644
index 0000000..baa195b
--- /dev/null
+++ b/tools/apply_week_label.awk
@@ -0,0 +1,18 @@
+# Inserta weekRangeLabel tras la línea que define weeklyStart
+/const weeklyStart=useMemo\(\)=> addDays\(startDate, weekIndex\*7\), \[startDate, weekIndex\]\);/ {
+  print
+  print "  // Rango visible de la semana (ej. '27 oct 2025 – 02 nov 2025')"
+  print "  const weekRangeLabel = (() => {"
+  print "    const s = weeklyStart;"
+  print "    const e = addDays(weeklyStart, 6);"
+  print "    const fmt = d => d.toLocaleDateString(undefined,{ day:'2-digit', month:'short', year:'numeric' });"
+  print "    return `${fmt(s)} – ${fmt(e)}`;"
+  print "  })();"
+  next
+}
+# Reemplaza el texto del título "Semana X / Y" para añadir el rango
+/\<div className="text-sm">Semana \{weekIndex\+1\} \/ \{state\.weeks\}<\/div\>/ {
+  print "              <div className=\"text-sm\">Semana {weekIndex+1} / {state.weeks} · {weekRangeLabel}</div>"
+  next
+}
+{ print }
-- 
2.45.2

